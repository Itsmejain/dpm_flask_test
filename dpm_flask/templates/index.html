<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <title>Hello, world!</title>
  <style>
    h1 {
      display: block;
      font-size: 2em;
      margin-block-start: 0.67em;
      margin-block-end: 0.67em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      font-weight: bold;
      color: rgb(241, 241, 241);
      text-align: center;
      width: 100%;
    }

    .textareaclass {
      background-color: rgb(26, 35, 82);

      font-size: large;
      margin-top: 20px;
      margin-bottom: 20px;
      color: aliceblue;
    }

    .textareabackgroundclass {
      background-color: rgb(142, 151, 151);
      text-align: center;
      margin-top: 30px;
    }

    .buttondiv {
      /* background-color: rgb(142, 151, 151); */
      text-align: center;
      margin-top: 20px;
      margin-bottom: 20px;
    }

    .bodyclass {
      background-color: black;
    }
  </style>


</head>

<body class="bodyclass">
  
  <!-- <form id="form_submit" method = "POST">   -->
    <label> Select Stocks </label>  
    <select id="form">  
    <!-- <option value = "ADANIPORTS"> ADANIPORTS   
    </option>  
    <option value = "ASIANPAINT"> ASIANPAINT   
    </option>  
    <option value = "AXISBANK"> AXISBANK  
    </option>   -->
    <option value = "BHARTIARTL">BHARTIARTL</option>
    <option value = "TATASTEEL">TATASTEEL</option>
    <option value = "TITAN">TITAN</option>
    <option value = "BRITANNIA">BRITANNIA</option>
    <option value = "MM">MM</option>
    <option value = "COALINDIA">COALINDIA</option>
    <option value = "JSWSTEEL">JSWSTEEL</option>
    <option value = "NESTLEIND">NESTLEIND</option>
    <option value = "ICICIBANK">ICICIBANK</option>
    <option value = "MARUTI">MARUTI</option>
    <option value = "ULTRACEMCO">ULTRACEMCO</option>
    <option value = "WIPRO">WIPRO</option>
    <option value = "NIFTY50_all">NIFTY50_all</option>
    <option value = "NTPC">NTPC</option>
    <option value = "VEDL">VEDL</option>
    <option value = "ASIANPAINT">ASIANPAINT</option>
    <option value = "ONGC">ONGC</option>
    <option value = "IOC">IOC</option>
    <option value = "DRREDDY">DRREDDY</option>
    <option value = "TECHM">TECHM</option>
    <option value = "TCS">TCS</option>
    <option value = "SUNPHARMA">SUNPHARMA</option>
    <option value = "HCLTECH">HCLTECH</option>
    <option value = "HDFC">HDFC</option>
    <option value = "KOTAKBANK">KOTAKBANK</option>
    <option value = "ZEEL">ZEEL</option>
    <option value = "AXISBANK">AXISBANK</option>
    <option value = "EICHERMOT">EICHERMOT</option>
    <option value = "HDFCBANK">HDFCBANK</option>
    <option value = "INFRATEL">INFRATEL</option>
    <option value = "TATAMOTORS">TATAMOTORS</option>
    <option value = "HEROMOTOCO">HEROMOTOCO</option>
    <option value = "UPL">UPL</option>
    <option value = "stock_metadata">stock_metadata</option>
    <option value = "CIPLA">CIPLA</option>
    <option value = "BAJAJ-AUTO">BAJAJ-AUTO</option>
    <option value = "ITC">ITC</option>
    <option value = "GAIL">GAIL</option>
    <option value = "POWERGRID">POWERGRID</option>
    <option value = "HINDALCO">HINDALCO</option>
    <option value = "BPCL">BPCL</option>
    <option value = "LT">LT</option>
    <option value = "ADANIPORTS">ADANIPORTS</option>
    <option value = "HINDUNILVR">HINDUNILVR</option>
    <option value = "GRASIM">GRASIM</option>
    <option value = "RELIANCE">RELIANCE</option>
    <option value = "INFY">INFY</option>
    <option value = "SHREECEM">SHREECEM</option>
    <option value = "SBIN">SBIN</option>
    <option value = "INDUSINDBK">INDUSINDBK</option>
    <option value = "BAJAJFINSV">BAJAJFINSV</option>
    <option value = "BAJFINANCE">BAJFINANCE</option>
    

    <!-- <input type="submit" value="Submit"> -->
    </select>  
    <!-- </form>  -->
    <label> Start Date </label>
    <input type="date" id="startdate">
    <label> End Date </label>
    <input type="date" id="enddate">

    <!-- <input type="text" id="highval"> -->
    <!-- <input type="text" id="lowval"> -->
    <div class="textareabackgroundclass">

      <!-- <textarea class="textareaclass">asdas</textarea> -->
      <form action="/classification" method="POST" style="display: inline;" id="textform">
  
        <!-- <textarea id="newsval" name = "newsval" class="textareaclass" id="field" placeholder="Enter News Here..." rows="15" cols="170">{% if text %}{{text}}{% endif %}</textarea> -->
        <textarea id="newsval" name = "newsval" class="textareaclass" id="field"  rows="15" cols="170">{{text}}</textarea>
        
        <!-- <input class="btn btn-primary btn-lg form-horizontal"  type="submit" value="Validate"/> -->
       
      </form>
    </div> 
    <button type='button' class="btn btn-primary btn-lg form-horizontal" onClick='submit()' id="validatebutton">SUBMIT</button>
    

<script type="text/javascript">
  function submit() {
    // alert("submit clicked");
    const URL = '/r'
    const xhr = new XMLHttpRequest();
    var stockname = document.getElementById("form").value;
    var startdate = document.getElementById("startdate").value;
    var endate = document.getElementById("enddate").value;

    data = stockname + ":"+ startdate +":"+ endate

    alert(data)
    console.log(data);

    xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {
        alert(xhr.responseText);
        console.log(xhr.responseText.getElementById);
        document.getElementById("newsval").innerHTML = xhr.responseText;
      
    }
}
    xhr.open('POST', URL);
    xhr.send(data);   
    console.log(xhr.response);
    
}

  </script> 
   <!-- --> -->
</body>

</html>